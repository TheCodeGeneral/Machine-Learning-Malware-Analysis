import os

# check for VM


# first lets get file path of binary we want to work with
file_path = input('Please enter filepath of binary: ')

# next lets get output directory
output_path = '> ' + input('Please enter filepath of output: ')

# debug mode
debug = '-d '

# this is for processing one file right now, need to update for directory
command_subsection = 'sudo objdump -M intel -b '
bfd = ''






# next we need to get bfd for the file as parameter of objdump
bfd_cmd = 'objdump -f ' + file_path + ' > tmp.txt'
os.system(bfd_cmd)
f = open("tmp.txt", "r")

# just search file for bfd format

pei = 'pei-x86-64'
pe = 'pe-x86-64'

if pei in f.read():
    bfd = pei + ' '

elif pe in f.read():
    bfd = pe + ' '

os.remove("tmp.txt")

command = command_subsection + bfd + debug + file_path + output_path
os.system(command)








